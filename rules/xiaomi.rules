rule "Xiaomi Switch 1"
when
    Channel "mihome:sensor_switch:158d00016d77ce:button" triggered LONG_PRESSED
then
    logInfo("Xiaomi", "Dolgi pritisk, vtičnica v dnevni je - " + PlugDnevSwitch.state)
    if (PlugDnevSwitch.state == ON) {
        PlugDnevSwitch.send(OFF)
    } else {
        PlugDnevSwitch.send(ON)
    }
    logInfo("Xiaomi", "Vtičnica v dnevni je - " + PlugDnevSwitch.state)
end

rule "Xiaomi Switch 1 short press"
when
    Channel "mihome:sensor_switch:158d00016d77ce:button" triggered SHORT_PRESSED
then
    logInfo("Xiaomi", "Kratek pritisk za menjanje radijske postaje")
    if (NextRadioStation.state == ON) NextRadioStation.sendCommand(OFF)
    else NextRadioStation.sendCommand(ON)
end

rule "Xiaomi Switch 1 double press"
when
    Channel "mihome:sensor_switch:158d00016d77ce:button" triggered DOUBLE_PRESSED
then
    logInfo("Xiaomi", "Dvojni pritisk")
    PlayURIAudio.sendCommand("")
end

rule "Xiaomi Switch 1 long released"
when
    Channel "mihome:sensor_switch:158d00016d77ce:button" triggered LONG_PRESSED
then
    logInfo("Xiaomi", "Dolgi spust")
end

rule "Mijia & Aqara Cube Controller"
when
    Channel 'mihome:sensor_cube:158d00029abcd1:action' triggered
then
    var actionName = receivedEvent.getEvent()
    switch(actionName) {
        case "MOVE": {
        }
        case "ROTATE_RIGHT": {
            val volume = (CubeDnevRotationAngle.state as Number) / 2
            VolumeAudio.postUpdate((VolumeAudio.state as Number) + volume)
        }
        case "ROTATE_LEFT": {
            val volume = ((CubeDnevRotationAngle.state as Number) / 2 ) * (-1)
            VolumeAudio.postUpdate((VolumeAudio.state as Number) - volume)
        }
        case "FLIP90": {
                if (NextRadioStation.state == ON) NextRadioStation.sendCommand(OFF)
                else NextRadioStation.sendCommand(ON)
        }
        case "FLIP180": {
        }
        case "TAP_TWICE": {
        }
        case "SHAKE_AIR": {
        }
        case "FREE_FALL": {
        }
        case "ALERT": {
        }
    }
end